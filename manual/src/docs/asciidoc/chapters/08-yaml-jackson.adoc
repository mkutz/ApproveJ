= YAML with Jackson

ApproveJ provides YAML support via https://github.com/FasterXML/jackson[Jackson] in two modules:

* `yaml-jackson` for Jackson 2.x
* `yaml-jackson3` for Jackson 3.x

Both modules provide the same functionality with identical APIs.
Choose the one matching your project's Jackson version.

IMPORTANT: Use only one of these modules in your project, not both.
Both modules register with the same alias `"yaml"`, and having both on the classpath will cause an error at runtime.

Since Jackson is a provided dependency, you need to add it explicitly.

== Dependencies

=== Jackson 2.x

.Gradle
[source,groovy,subs=attributes+,role="primary"]
----
implementation 'org.approvej:yaml-jackson:{revnumber}'
implementation 'com.fasterxml.jackson.core:jackson-databind:2.18.0'
implementation 'com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.18.0'
implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.18.0'
----
.Gradle.kts
[source,kotlin,subs=attributes+,role="secondary"]
----
implementation("org.approvej:yaml-jackson:{revnumber}")
implementation("com.fasterxml.jackson.core:jackson-databind:2.18.0")
implementation("com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.18.0")
implementation("com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.18.0")
----
.Maven
[source,xml,subs=attributes+,role="secondary"]
----
<dependency>
  <groupId>org.approvej</groupId>
  <artifactId>yaml-jackson</artifactId>
  <version>{revnumber}</version>
</dependency>
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-databind</artifactId>
  <version>2.18.0</version>
</dependency>
<dependency>
  <groupId>com.fasterxml.jackson.dataformat</groupId>
  <artifactId>jackson-dataformat-yaml</artifactId>
  <version>2.18.0</version>
</dependency>
<dependency>
  <groupId>com.fasterxml.jackson.datatype</groupId>
  <artifactId>jackson-datatype-jsr310</artifactId>
  <version>2.18.0</version>
</dependency>
----

=== Jackson 3.x

.Gradle
[source,groovy,subs=attributes+,role="primary"]
----
implementation 'org.approvej:yaml-jackson3:{revnumber}'
implementation 'tools.jackson.core:jackson-databind:3.0.0'
implementation 'tools.jackson.dataformat:jackson-dataformat-yaml:3.0.0'
----
.Gradle.kts
[source,kotlin,subs=attributes+,role="secondary"]
----
implementation("org.approvej:yaml-jackson3:{revnumber}")
implementation("tools.jackson.core:jackson-databind:3.0.0")
implementation("tools.jackson.dataformat:jackson-dataformat-yaml:3.0.0")
----
.Maven
[source,xml,subs=attributes+,role="secondary"]
----
<dependency>
  <groupId>org.approvej</groupId>
  <artifactId>yaml-jackson3</artifactId>
  <version>{revnumber}</version>
</dependency>
<dependency>
  <groupId>tools.jackson.core</groupId>
  <artifactId>jackson-databind</artifactId>
  <version>3.0.0</version>
</dependency>
<dependency>
  <groupId>tools.jackson.dataformat</groupId>
  <artifactId>jackson-dataformat-yaml</artifactId>
  <version>3.0.0</version>
</dependency>
----

TIP: If you use the ApproveJ BOM, you can omit the Jackson version numbers as the BOM provides recommended versions.

NOTE: Jackson 3 has Java date/time support built-in, so no separate `jackson-datatype-jsr310` dependency is needed.

The YAML module provides a `YamlPrintFormat` (see <<printing>>) for rendering objects as YAML in the approval flow.

=== Import Differences

The API is identical between both modules.
Only the import statements differ:

[cols="1,1"]
|===
| Jackson 2.x | Jackson 3.x

| `org.approvej.yaml.jackson.*`
| `org.approvej.yaml.jackson3.*`

| `com.fasterxml.jackson.dataformat.yaml.*`
| `tools.jackson.dataformat.yaml.*`
|===


== Print as YAML

The link:{javadoc-url}/yaml-jackson/org/approvej/yaml/jackson/YamlPrintFormat.html[`YamlPrintFormat`] allows to print any object in YAML format.

[source,java,indent=0,role="primary"]
.Java
----
include::../../../test/java/examples/java/YamlJacksonDocTest.java[tag=print_yaml]
----
[source,kotlin,indent=0,role="secondary"]
.Kotlin
----
include::../../../test/kotlin/examples/kotlin/YamlJacksonDocTest.kt[tag=print_yaml]
----
<1> applies the `YamlPrintFormat` to convert the `Person` object to a string

Creates the following approved file:

[source,json]
.Approved file
----
include::../../../test/java/examples/java/YamlJacksonDocTest-print_yaml-approved.yaml[]
----
